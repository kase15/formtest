<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>無料エントリー - 職業案内</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --primary-color: #ff9800;
            --secondary-color: #79e536;
            --background-color: #f5f5f5;
            --text-color: #333333;
        }
        body {
            font-family: 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
        }
        .form-container {
            background-color: rgba(255, 255, 255, 0.6); /* 60%の透明度 */
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            width: 346px;
            height: 509px;
        }
        .step-indicator {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #e0e0e0;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .step-indicator.active {
            background-color: var(--primary-color);
        }
        .custom-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23a0aec0'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.5rem center;
            background-size: 1.5em 1.5em;
        }
        .employment-status-btn {
            transition: all 0.3s ease;
        }
        .employment-status-btn.active {
            background-color: var(--secondary-color);
            color: #ffffff;
            border-color: var(--secondary-color);
        }
        .next-btn {
            background: linear-gradient(to right, #ff9800, #ff5722);
        }
        .next-btn:hover {
            background: linear-gradient(to right, #ff5722, #ff9800);
        }
        .step-content {
            transition: all 1.0s ease;
            width: 100%;
        }
        .step-content.hidden {
            display: none;
        }
        .slide-out-left {
            transform: translateX(-100%);
            opacity: 0;
        }
        .slide-in-right {
            transform: translateX(100%);
            opacity: 0;
        }
        .slide-out-right {
            transform: translateX(100%);
            opacity: 0;
        }
        .slide-in-left {
            transform: translateX(-100%);
            opacity: 0;
        }
        .custom-gradient-select {
            background-image: 
            linear-gradient(to bottom, 
                rgba(255,255,255,1) 0%,
                rgba(240,240,240,1) 20%,
                rgba(230,230,230,1) 50%,
                rgba(240,240,240,1) 80%,
                rgba(255,255,255,1) 100%
            );
         }
            .employment-status-btn {
            background-image: 
            linear-gradient(to bottom, 
                rgba(255,255,255,0.8) 0%,
                rgba(240,240,240,1) 50%,
                rgba(230,230,230,1) 100%
            );
            box-shadow: 0 1px 3px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.5);
        }
        .employment-status-btn.active {
            background-image: 
            linear-gradient(to bottom, 
                rgb(121, 150, 225) 0%,
                rgb(79, 109, 186) 100%
            );
            box-shadow: 0 1px 3px rgba(0,0,0,0.2), inset 0 1px 0 rgba(255,255,255,0.3);
        }
        .employment-status-btn.active::before {
            content: "✓";
            position: absolute;
            left: 10px;
            color: white;
            font-weight: bold;
        }
            /* ... 既存のスタイル ... */
    
            .custom-select-wrapper {
            position: relative;
            width: 100%;
        }
        .custom-select {
            appearance: none;
            width: 100%;
            padding: 10px 35px 10px 10px;
            font-size: 16px;
            border: 1px solid #bbb;
            border-radius: 3px;
            background: linear-gradient(to bottom, #ffffff 0%, #f2f2f2 100%);
            box-shadow: 0 1px 0 rgba(255,255,255,0.8) inset,
                        0 1px 3px rgba(0,0,0,0.1);
            color: #333;
            text-shadow: 0 1px 0 #fff;
        }
        .custom-select:focus {
            outline: none;
            border-color: #999;
            box-shadow: 0 0 5px rgba(0,0,0,0.2);
        }
        .custom-select-wrapper::after {
            content: "\25BC";
            position: absolute;
            top: 50%;
            right: 10px;
            transform: translateY(-50%);
            color: #666;
            pointer-events: none;
            font-size: 12px;
        }
        .select-label {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
            color: #202020;
        }
        .required {
            color: #ff4d4d;
            margin-left: 5px;
        }
        .form-content {
            background-color: rgba(255, 255, 255, 0.9); /* フォーム内容の背景 */
            padding: 20px;
            border-radius: 8px;
        }
        
        input::placeholder, select::placeholder {
            color: #999;
            font-style: italic;
        }
        
        /* 入力欄のスタイル調整 */
        input[type="text"], input[type="number"], input[type="tel"], input[type="email"], select {
            background-color: white;
            border: 1px solid #ddd;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 14px;
        }
    </style>
</head>
<body class="p-0 tracking-wide">
    <div id="form-container" class="form-container mx-auto my-10 p-4 relative">
        <form id="entryForm" method="post" action="https://script.google.com/macros/s/AKfycbyDSkluozMp8-SYqrZUorKJpUKDro0x4bTkOkbJM8Gcrp3kkP4Ek8P9feFnTnpM6_C7/exec" class="space-y-4">
            <input type="hidden" name="oid" value="00D5i000007D96l">
            <input type="hidden" name="retURL" value="https://foods-labo.info/thanks/thanks_kanto/">
            <input type="hidden" id="00N5i00000INJMr" name="00N5i00000INJMr" value="/lp/">
            <input type="hidden" id="00N5i00000INmNo" name="00N5i00000INmNo" value="関東">
            <input type="hidden" id="00N5i00000INmir" name="00N5i00000INmir" value="">
            <input type="hidden" id="00N5i00000FudHw" name="00N5i00000FudHw" value="">
            <input type="hidden" id="00N5i00000FudHy" name="00N5i00000FudHy" value="">
            <input type="hidden" id="00N5i00000FudHz" name="00N5i00000FudHz" value="">

            <div class="w-full text-center  mb-2 items-center">
                <p class="text-black text-m font-medium  inline-block rounded-full mb-2">
                    ＼簡単15秒／
                </p>
                <h1 class="text-gray-700 text-2xl font-bold "> ─ 完全無料登録 ─</h1>
            </div>

            <p class="text-center font-bold text-gray-600">
                <span class="border-b-2 text-orange-500">非公開求人</span>まで幅広くご紹介いたします！
            </p>

            <div id="step1" class="step-content">
                <div class="mb-3">
                    <label for="00N5i00000INIB9" class="select-label">
                        お住まい<span class="text-red-500 ml-1 text-base">必須</span>
                    </label>
                    <div class="custom-select-wrapper">
                        <select id="00N5i00000INIB9" name="00N5i00000INIB9" required class="custom-select">
                            <option value="" disabled selected>都道府県</option>
                            <option value="東京23区">東京23区</option>
                            <option value="北海道">北海道</option>
                            <option value="青森県">青森県</option>
                            <option value="岩手県">岩手県</option>
                            <option value="宮城県">宮城県</option>
                            <option value="秋田県">秋田県</option>
                            <option value="山形県">山形県</option>
                            <option value="福島県">福島県</option>
                            <option value="茨城県">茨城県</option>
                            <option value="栃木県">栃木県</option>
                            <option value="群馬県">群馬県</option>
                            <option value="埼玉県">埼玉県</option>
                            <option value="千葉県">千葉県</option>
                            <option value="東京都">東京都</option>
                            <option value="神奈川県">神奈川県</option>
                            <option value="新潟県">新潟県</option>
                            <option value="富山県">富山県</option>
                            <option value="石川県">石川県</option>
                            <option value="福井県">福井県</option>
                            <option value="山梨県">山梨県</option>
                            <option value="長野県">長野県</option>
                            <option value="岐阜県">岐阜県</option>
                            <option value="静岡県">静岡県</option>
                            <option value="愛知県">愛知県</option>
                            <option value="三重県">三重県</option>
                            <option value="滋賀県">滋賀県</option>
                            <option value="京都府">京都府</option>
                            <option value="大阪府">大阪府</option>
                            <option value="兵庫県">兵庫県</option>
                            <option value="奈良県">奈良県</option>
                            <option value="和歌山県">和歌山県</option>
                            <option value="鳥取県">鳥取県</option>
                            <option value="島根県">島根県</option>
                            <option value="岡山県">岡山県</option>
                            <option value="広島県">広島県</option>
                            <option value="山口県">山口県</option>
                            <option value="徳島県">徳島県</option>
                            <option value="香川県">香川県</option>
                            <option value="愛媛県">愛媛県</option>
                            <option value="高知県">高知県</option>
                            <option value="福岡県">福岡県</option>
                            <option value="佐賀県">佐賀県</option>
                            <option value="長崎県">長崎県</option>
                            <option value="熊本県">熊本県</option>
                            <option value="大分県">大分県</option>
                            <option value="宮崎県">宮崎県</option>
                            <option value="鹿児島県">鹿児島県</option>
                            <option value="沖縄県">沖縄県</option>
                        </select>
                    </div>
                </div>
                <div class="mb-3">
                    <label class="block text-lg font-bold mb-2">就業状況<span class="text-red-500 ml-1 text-base">必須</span></label>
                    <div class="flex space-x-4">
                        <button type="button" 
                            class="employment-status-btn active flex-1 py-2 px-4 border border-gray-300 rounded-lg 
                            focus:outline-none focus:ring-2 focus:ring-primary-color relative pl-10">
                            在職中
                        </button>
                        <button type="button" 
                            class="employment-status-btn flex-1 py-2 px-4 border border-gray-300 rounded-lg 
                            focus:outline-none focus:ring-2 focus:ring-primary-color">
                            離職中
                        </button>
                    </div>
                    <input type="hidden" id="00N5i00000INHtf" name="00N5i00000INHtf" value="就業中">
                </div>
                <div class="mb-3">
                    <label for="00N5i00000INHtk" class="block text-lg font-bold mb-2">
                        業界経験<span class="text-red-500 ml-1 text-base">必須</span>
                    </label>
                    <div class="custom-select-wrapper">
                        <select id="00N5i00000INHtk" name="00N5i00000INHtk" required class="custom-select">
                            <option value="" disabled selected>業界経験を選択してください</option>
                            <option value="あり">あり</option>
                            <option value="なし">なし</option>
                            <option value="１年">１年</option>
                            <option value="2~4年">2~4年</option>
                            <option value="5~9年">5年以上</option>
                        </select>
                    </div>
                </div>
                <div class="text-center mt-">
                    <button type="button" id="nextStep" class="bg-gradient-to-r from-orange-400 to-orange-500 flex w-full items-center justify-between rounded-full px-0 py-3 transition duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-primary-color focus:ring-opacity-50">
                        <span class="bg-white text-blue-600 font-bold py-2 px-4 tracking-wider rounded-full mx-2">簡単2STEP</span>
                        <span class="text-white text-l font-bold pr-4">次へ</span>
                        <span class="text-white text-l font-bold pr-4">＞</span>
                    </button>
                </div>
            </div>

            <div id="step2" class="step-content hidden">
                <div class="grid grid-cols-2 gap-4 mb-2">
                    <div>
                        <label for="last_name" class="block text-m font-bold mb-0">氏名(姓)<span class="text-red-500 ml-1 font-normal">必須</span></label>
                        <input type="text" id="last_name" name="last_name" required class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-primary-color" placeholder="山田">
                    </div>
                    <div>
                        <label for="first_name" class="block text-m font-bold mb-0">氏名(名)<span class="text-red-500 ml-1 font-normal">必須</span></label>
                        <input type="text" id="first_name" name="first_name" required class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-primary-color" placeholder="太郎">
                    </div>
                </div>
                <div class="mb-2">
                    <label for="00N5i00000INHsm" class="block text-m font-bold mb-0">年齢<span class="text-red-500 ml-1 font-normal">必須</span></label>
                    <input type="number" id="00N5i00000INHsm" name="00N5i00000INHsm" required min="18" max="100" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-primary-color" placeholder="30">
                </div>
                <div class="mb-2">
                    <label for="mobile" class="block text-m font-bold mb-0">電話番号<span class="text-red-500 ml-1 font-normal">必須</span></label>
                    <input type="tel" id="mobile" name="mobile" required pattern="[0-9]{10,11}" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-primary-color" placeholder="09012345678">
                </div>
                <div class="mb-2">
                    <label for="email" class="block text-m font-bold mb-0">メールアドレス<span class="text-red-500 ml-1 font-normal">必須</span></label>
                    <input type="email" id="email" name="email" required class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-primary-color" placeholder="example@email.com">
                </div>
                
                <div class="flex justify-between mt-4 space-x-3">
                    <button type="button" id="prevStep" class="px-4 py-1 h-12 w-20 bg-green-400 text-white font-bold rounded-lg transition duration-300 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50">
                        戻る
                    </button>
                    <button type="submit" class="next-btn px-4 py-1 flex-grow h-12 rounded-full text-white text-lg font-bold transition duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-primary-color focus:ring-opacity-50">
                        無料エントリー！
                    </button>
                </div>
            </div>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('entryForm');
            const step1 = document.getElementById('step1');
            const step2 = document.getElementById('step2');
            const nextStepBtn = document.getElementById('nextStep');
            const prevStepBtn = document.getElementById('prevStep');
            const employmentStatusBtns = document.querySelectorAll('.employment-status-btn');
            const employmentStatusInput = document.getElementById('00N5i00000INHtf');
            const stepIndicators = document.querySelectorAll('.step-indicator');

            function showStep(stepToShow, stepToHide, direction) {
                const slideOutClass = direction === 'next' ? 'slide-out-left' : 'slide-out-right';
                const slideInClass = direction === 'next' ? 'slide-in-right' : 'slide-in-left';

                stepToHide.classList.add(slideOutClass);
                stepToShow.classList.remove('hidden');
                stepToShow.classList.add(slideInClass);

                // Force a reflow
                stepToShow.offsetHeight;

                stepToShow.classList.remove(slideInClass);
                stepToHide.classList.remove(slideOutClass);

                setTimeout(() => {
                    stepToHide.classList.add('hidden');
                }, 500);
            }
    
            function updateStepIndicator(activeStep) {
                stepIndicators.forEach((indicator, index) => {
                    if (index + 1 === activeStep) {
                        indicator.classList.add('active');
                    } else {
                        indicator.classList.remove('active');
                    }
                });
            }
    
            nextStepBtn.addEventListener('click', function() {
                if (validateStep1()) {
                    showStep(step2, step1, 'next');
                    updateStepIndicator(2);
                }
            });
    
            prevStepBtn.addEventListener('click', function() {
                showStep(step1, step2, 'prev');
                updateStepIndicator(1);
            });
    
            employmentStatusBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    employmentStatusBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    employmentStatusInput.value = this.dataset.value;
                });
            });
    
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                if (validateStep2()) {
                    const scriptURL = 'https://script.google.com/macros/s/AKfycbyDSkluozMp8-SYqrZUorKJpUKDro0x4bTkOkbJM8Gcrp3kkP4Ek8P9feFnTnpM6_C7/exec';
                    
                    fetch(scriptURL, { method: 'POST', body: new FormData(form) })
                        .then(response => response.text())
                        .then(data => {
                            console.log('Success:', data);
                            // フォーム送信後、指定されたURLに遷移
                            window.location.href = 'https://preview.studio.site/live/4Ra4K9mVqD/thanks_contact';
                        })
                        .catch(error => {
                            console.error('Error:', error);
                            alert('エントリーの送信中にエラーが発生しました。もう一度お試しください。');
                        });
                }
            });
    
            function validateStep1() {
                const residence = document.getElementById('00N5i00000INIB9').value;
                const experience = document.getElementById('00N5i00000INHtk').value;
                if (residence === '' || experience === '') {
                    alert('すべての必須項目を入力してください。');
                    return false;
                }
                return true;
            }
    
            function validateStep2() {
                const requiredFields = ['last_name', 'first_name', '00N5i00000INHsm', 'mobile', 'email'];
                for (let field of requiredFields) {
                    const value = document.getElementById(field).value.trim();
                    if (value === '') {
                        alert('すべての必須項目を入力してください。');
                        return false;
                    }
                }
    
                const phoneNumber = document.getElementById('mobile').value;
                if (!/^[0-9]{10,11}$/.test(phoneNumber)) {
                    alert('有効な電話番号を入力してください（10桁または11桁の数字）。');
                    return false;
                }
    
                const email = document.getElementById('email').value;
                if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                    alert('有効なメールアドレスを入力してください。');
                    return false;
                }
    
                return true;
            }
    
            function resetEmploymentStatus() {
                employmentStatusBtns.forEach(btn => btn.classList.remove('active'));
                employmentStatusBtns[0].classList.add('active');
                employmentStatusInput.value = employmentStatusBtns[0].dataset.value;
            }
    
            function sendHeight() {
                var height = document.getElementById('form-container').offsetHeight;
                window.parent.postMessage({type: 'setHeight', height: height}, '*');
            }
    
            window.addEventListener('load', sendHeight);
            window.addEventListener('resize', sendHeight);
    
            const inputFields = document.querySelectorAll('input, select, textarea');
            inputFields.forEach(field => {
                field.addEventListener('input', sendHeight);
            });
    
            [step1, step2].forEach(step => {
                step.addEventListener('transitionend', sendHeight);
            });
        });
        </script>
    </body>
    </html>