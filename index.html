<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>無料エントリー - 職業案内</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --primary-color: #ff9800;
            --secondary-color: #79e536;
            --background-color: #f5f5f5;
            --text-color: #333333;
        }
        body {
            font-family: 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
        }
        .form-container {
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            min-height: 500px;
        }
        .step-indicator {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #e0e0e0;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .step-indicator.active {
            background-color: var(--primary-color);
        }
        .custom-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23a0aec0'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.5rem center;
            background-size: 1.5em 1.5em;
        }
        .employment-status-btn {
            transition: all 0.3s ease;
        }
        .employment-status-btn.active {
            background-color: var(--secondary-color);
            color: #ffffff;
            border-color: var(--secondary-color);
        }
        .next-btn {
            background: linear-gradient(to right, #ff9800, #ff5722);
        }
        .next-btn:hover {
            background: linear-gradient(to right, #ff5722, #ff9800);
        }
        .step-content {
            transition: all 1.0s ease;
            width: 100%;
        }
        .step-content.hidden {
            display: none;
        }
        .slide-out-left {
            transform: translateX(-100%);
            opacity: 0;
        }
        .slide-in-right {
            transform: translateX(100%);
            opacity: 0;
        }
        .custom-gradient-select {
            background-image: 
            linear-gradient(to bottom, 
                rgba(255,255,255,1) 0%,
                rgba(240,240,240,1) 20%,
                rgba(230,230,230,1) 50%,
                rgba(240,240,240,1) 80%,
                rgba(255,255,255,1) 100%
            );
         }
            .employment-status-btn {
            background-image: 
            linear-gradient(to bottom, 
                rgba(255,255,255,0.8) 0%,
                rgba(240,240,240,1) 50%,
                rgba(230,230,230,1) 100%
            );
            box-shadow: 0 1px 3px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.5);
        }
        .employment-status-btn.active {
            background-image: 
            linear-gradient(to bottom, 
                rgb(150, 218, 107) 0%,
                rgb(136, 210, 94) 100%
            );
            box-shadow: 0 1px 3px rgba(0,0,0,0.2), inset 0 1px 0 rgba(255,255,255,0.3);
        }
        .employment-status-btn.active::before {
            content: "✓";
            position: absolute;
            left: 10px;
            color: white;
            font-weight: bold;
        }
            /* ... 既存のスタイル ... */
    
            .custom-select-wrapper {
            position: relative;
            width: 100%;
        }
        .custom-select {
            appearance: none;
            width: 100%;
            padding: 10px 35px 10px 10px;
            font-size: 16px;
            border: 1px solid #bbb;
            border-radius: 3px;
            background: linear-gradient(to bottom, #ffffff 0%, #f2f2f2 100%);
            box-shadow: 0 1px 0 rgba(255,255,255,0.8) inset,
                        0 1px 3px rgba(0,0,0,0.1);
            color: #333;
            text-shadow: 0 1px 0 #fff;
        }
        .custom-select:focus {
            outline: none;
            border-color: #999;
            box-shadow: 0 0 5px rgba(0,0,0,0.2);
        }
        .custom-select-wrapper::after {
            content: "\25BC";
            position: absolute;
            top: 50%;
            right: 10px;
            transform: translateY(-50%);
            color: #666;
            pointer-events: none;
            font-size: 12px;
        }
        .select-label {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }
        .required {
            color: #ff4d4d;
            margin-left: 5px;
        }
    </style>
</head>
<body class="p-4">
    <div id="form-container" class="form-container max-w-2xl mx-auto my-10 p-8">
        <form id="entryForm" method="post" action="https://script.google.com/macros/s/AKfycbyDSkluozMp8-SYqrZUorKJpUKDro0x4bTkOkbJM8Gcrp3kkP4Ek8P9feFnTnpM6_C7/exec" class="space-y-6">
            <input type="hidden" name="oid" value="00D5i000007D96l">
            <input type="hidden" name="retURL" value="https://foods-labo.info/thanks/thanks_kanto/">
            <input type="hidden" id="00N5i00000INJMr" name="00N5i00000INJMr" value="/lp/">
            <input type="hidden" id="00N5i00000INmNo" name="00N5i00000INmNo" value="関東">
            <input type="hidden" id="00N5i00000INmir" name="00N5i00000INmir" value="">
            <input type="hidden" id="00N5i00000FudHw" name="00N5i00000FudHw" value="">
            <input type="hidden" id="00N5i00000FudHy" name="00N5i00000FudHy" value="">
            <input type="hidden" id="00N5i00000FudHz" name="00N5i00000FudHz" value="">

            <div class="text-center mb-8 bg-blue-700 w-full">
                <div class="inline-block text-white px-4 py-2 rounded-lg">
                    <p class="text-m font-medium">簡単2ステップ</p>
                </div>
                <h2 class="text-3xl font-bold mt-4 text-white">- 完全無料登録 -</h2>
                <p class="text-gray-300">ENTRY</p>
            </div>

            <div class="flex justify-center space-x-4 mb-8">
                <div class="step-indicator active">1</div>
                <div class="step-indicator">2</div>
            </div>

            <p class="text-center mb-8">
                一般公開している企業から<br>
                <span class="border-b-2 text-orange-500">非公開求人</span>まで幅広くご紹介いたします！
            </p>

            <div id="step1" class="step-content">
                <div class="mb-6 relative">
                    <label for="00N5i00000INIB9" class="block text-lg font-bold mb-2">
                        お住まい<span class="text-red-500 ml-1">必須</span>
                    </label>
                    <select id="00N5i00000INIB9" name="00N5i00000INIB9" required 
                        class="custom-select">
                        <option value="" disabled selected>都道府県</option>
                        <option value="東京23区">東京23区</option>
                        <option value="東京都内">東京都内</option>
                        <option value="神奈川県">神奈川県</option>
                        <option value="千葉県">千葉県</option>
                        <option value="埼玉県">埼玉県</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                        <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                            <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/>
                        </svg>
                    </div>
                </div>
                <div class="mb-6">
                    <label class="block text-lg font-bold mb-2">就業状況<span class="text-red-500 ml-1">必須</span></label>
                    <div class="flex space-x-4">
                        <button type="button" 
                            class="employment-status-btn active flex-1 py-2 px-4 border border-gray-300 rounded-lg 
                            focus:outline-none focus:ring-2 focus:ring-primary-color relative pl-10">
                            在職中
                        </button>
                        <button type="button" 
                            class="employment-status-btn flex-1 py-2 px-4 border border-gray-300 rounded-lg 
                            focus:outline-none focus:ring-2 focus:ring-primary-color">
                            離職中
                        </button>
                    </div>
                    <input type="hidden" id="00N5i00000INHtf" name="00N5i00000INHtf" value="就業中">
                </div>
                <div class="mb-6">
                    <label for="00N5i00000INHtk" class="block text-lg font-bold mb-2">
                        業界経験<span class="text-red-500 ml-1">必須</span>
                    </label>
                    <div class="custom-select-wrapper">
                        <select id="00N5i00000INHtk" name="00N5i00000INHtk" required class="custom-select">
                            <option value="" disabled selected>業界経験を選択してください</option>
                            <option value="あり">あり</option>
                            <option value="なし">なし</option>
                            <option value="１年">１年</option>
                            <option value="２年">２年</option>
                            <option value="３年">３年</option>
                            <option value="４年">４年</option>
                            <option value="５年">５年</option>
                            <option value="６年">６年</option>
                            <option value="７年">７年</option>
                            <option value="８年">８年</option>
                            <option value="９年">９年</option>
                            <option value="１０年以上">１０年以上</option>
                        </select>
                    </div>
                </div>
                <div class="text-center mt-8">
                    <button type="button" id="nextStep" class="bg-gradient-to-r from-orange-400 to-orange-500 flex w-full items-center justify-between rounded-full px-0 py-3 transition duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-primary-color focus:ring-opacity-50">
                        <span class="bg-white text-green-500 py-2 px-4 rounded-full mx-2">簡単2STEP</span>
                        <span class="text-white text-l font-bold pr-4">次へ</span>
                        <span class="text-white text-l font-bold pr-4">＞</span>
                    </button>
                </div>
            </div>

            <div id="step2" class="step-content hidden">
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <div>
                        <label for="last_name" class="block text-m font-bold mb-2">氏名(姓)<span class="text-red-500 ml-1">必須</span></label>
                        <input type="text" id="last_name" name="last_name" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-primary-color">
                    </div>
                    <div>
                        <label for="first_name" class="block text-m font-bold mb-2">氏名(名)<span class="text-red-500 ml-1">必須</span></label>
                        <input type="text" id="first_name" name="first_name" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-primary-color">
                    </div>
                </div>
                <div class="mb-6">
                    <label for="00N5i00000INHsm" class="block text-m font-bold mb-2">年齢<span class="text-red-500 ml-1">必須</span></label>
                    <input type="number" id="00N5i00000INHsm" name="00N5i00000INHsm" required min="18" max="100" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-primary-color">
                </div>
                <div class="mb-6">
                    <label for="mobile" class="block text-m font-bold mb-2">電話番号<span class="text-red-500 ml-1">必須</span></label>
                    <input type="tel" id="mobile" name="mobile" required pattern="[0-9]{10,11}" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-primary-color">
                </div>
                <div class="mb-6">
                    <label for="email" class="block text-m font-bold mb-2">メールアドレス<span class="text-red-500 ml-1">必須</span></label>
                    <input type="email" id="email" name="email" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-primary-color">
                </div>
                <div class="mb-6">
                    <label for="00N5i00000INHsr" class="block text-m font-bold mb-2">LINEでのやり取りを希望（任意）</label>
                    <input type="text" id="00N5i00000INHsr" name="00N5i00000INHsr" placeholder="LINE IDを入力してください" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-primary-color">
                </div>
                <div class="flex justify-between mt-8 space-x-3">
                    <button type="button" id="prevStep" class="px-8 py-3 m-3 bg-green-400 text-white font-bold rounded-lg transition duration-300 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50">
                        戻る
                    </button>
                    <button type="submit" class="next-btn px-8 py-3 w-full rounded-full text-white text-lg font-bold transition duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-primary-color focus:ring-opacity-50">
                        無料エントリー！
                    </button>
                </div>
            </div>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('entryForm');
            const step1 = document.getElementById('step1');
            const step2 = document.getElementById('step2');
            const nextStepBtn = document.getElementById('nextStep');
            const prevStepBtn = document.getElementById('prevStep');
            const employmentStatusBtns = document.querySelectorAll('.employment-status-btn');
            const employmentStatusInput = document.getElementById('00N5i00000INHtf');
            const stepIndicators = document.querySelectorAll('.step-indicator');
    
            function showStep(stepToShow, stepToHide, direction) {
                const slideOutClass = direction === 'next' ? 'slide-out-left' : 'slide-out-right';
                const slideInClass = direction === 'next' ? 'slide-in-right' : 'slide-in-left';
    
                stepToHide.classList.add(slideOutClass);
                stepToShow.classList.remove('hidden');
                stepToShow.classList.add(slideInClass);
    
                // Force a reflow
                stepToShow.offsetHeight;
    
                stepToShow.classList.remove(slideInClass);
                
                setTimeout(() => {
                    stepToHide.classList.add('hidden');
                    stepToHide.classList.remove(slideOutClass);
                    sendHeight();
                }, 500);
            }
    
            function updateStepIndicator(activeStep) {
                stepIndicators.forEach((indicator, index) => {
                    if (index + 1 === activeStep) {
                        indicator.classList.add('active');
                    } else {
                        indicator.classList.remove('active');
                    }
                });
            }
    
            nextStepBtn.addEventListener('click', function() {
                if (validateStep1()) {
                    showStep(step2, step1, 'next');
                    updateStepIndicator(2);
                }
            });
    
            prevStepBtn.addEventListener('click', function() {
                showStep(step1, step2, 'prev');
                updateStepIndicator(1);
            });
    
            employmentStatusBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    employmentStatusBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    employmentStatusInput.value = this.dataset.value;
                });
            });
    
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                if (validateStep2()) {
                    // フォームの action URL を確認
                    const scriptURL = 'https://script.google.com/macros/s/AKfycbyDSkluozMp8-SYqrZUorKJpUKDro0x4bTkOkbJM8Gcrp3kkP4Ek8P9feFnTnpM6_C7/exec';
                    
                    fetch(scriptURL, { method: 'POST', body: new FormData(form) })
                        .then(response => response.text())
                        .then(data => {
                            console.log('Success:', data);
                            alert('エントリーが完了しました！');
                            form.reset();
                            showStep(step1, step2, 'prev');
                            updateStepIndicator(1);
                            resetEmploymentStatus();
                        })
                        .catch(error => {
                            console.error('Error:', error);
                            alert('エントリーの送信中にエラーが発生しました。もう一度お試しください。');
                        });
                }
            });
    
            function validateStep1() {
                const residence = document.getElementById('00N5i00000INIB9').value;
                const experience = document.getElementById('00N5i00000INHtk').value;
                if (residence === '' || experience === '') {
                    alert('すべての必須項目を入力してください。');
                    return false;
                }
                return true;
            }
    
            function validateStep2() {
                const requiredFields = ['last_name', 'first_name', '00N5i00000INHsm', 'mobile', 'email'];
                for (let field of requiredFields) {
                    const value = document.getElementById(field).value.trim();
                    if (value === '') {
                        alert('すべての必須項目を入力してください。');
                        return false;
                    }
                }
    
                const phoneNumber = document.getElementById('mobile').value;
                if (!/^[0-9]{10,11}$/.test(phoneNumber)) {
                    alert('有効な電話番号を入力してください（10桁または11桁の数字）。');
                    return false;
                }
    
                const email = document.getElementById('email').value;
                if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                    alert('有効なメールアドレスを入力してください。');
                    return false;
                }
    
                return true;
            }
    
            function resetEmploymentStatus() {
                employmentStatusBtns.forEach(btn => btn.classList.remove('active'));
                employmentStatusBtns[0].classList.add('active');
                employmentStatusInput.value = employmentStatusBtns[0].dataset.value;
            }
    
            function sendHeight() {
                var height = document.getElementById('form-container').offsetHeight;
                window.parent.postMessage({type: 'setHeight', height: height}, '*');
            }
    
            window.addEventListener('load', sendHeight);
            window.addEventListener('resize', sendHeight);
    
            const inputFields = document.querySelectorAll('input, select, textarea');
            inputFields.forEach(field => {
                field.addEventListener('input', sendHeight);
            });
    
            [step1, step2].forEach(step => {
                step.addEventListener('transitionend', sendHeight);
            });
        });
        </script>
    </body>
    </html>